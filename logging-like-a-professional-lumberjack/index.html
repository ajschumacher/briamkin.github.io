
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Logging in Python</title>
    <meta name="description" content="Logging in Python is very necessary as a debugging tool. It allows us to see why our program breaks and to fix it quickly.">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="57x57" href="../assets/favicon/apple-touch-icon-57x57.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="60x60" href="../assets/favicon/apple-touch-icon-60x60.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="72x72" href="../assets/favicon/apple-touch-icon-72x72.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/favicon/apple-touch-icon-76x76.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="114x114" href="../assets/favicon/apple-touch-icon-114x114.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="120x120" href="../assets/favicon/apple-touch-icon-120x120.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="144x144" href="../assets/favicon/apple-touch-icon-144x144.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="152x152" href="../assets/favicon/apple-touch-icon-152x152.png?v=cad3784cd1">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicon/apple-touch-icon-180x180.png?v=cad3784cd1">
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-32x32.png?v=cad3784cd1">
    <link rel="icon" type="image/png" href="../assets/favicon/android-chrome-192x192.png?v=cad3784cd1">
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-96x96.png?v=cad3784cd1">
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-16x16.png?v=cad3784cd1">
    <link rel="manifest" href="../assets/favicon/manifest.json?v=cad3784cd1">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/assets/favicon/mstile-144x144.png?v=cad3784cd1">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=cad3784cd1">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic%7COpen+Sans:700,400">
    <link rel="stylesheet" type="text/css" href="../assets/css/prism.css?v=cad3784cd1">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-62074703-1', 'auto');
      ga('send', 'pageview');

    </script>
    <link rel="canonical" href="http://briank.im/logging-like-a-professional-lumberjack/">
    
    <meta property="og:site_name" content="loving learning">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Logging in Python">
    <meta property="og:description" content="Logging in Python is very necessary as a debugging tool. It allows us to see why our program breaks and to fix it quickly....">
    <meta property="og:url" content="http://briank.im/logging-like-a-professional-lumberjack/">
    <meta property="article:published_time" content="2015-04-29T00:45:00.000Z">
    <meta property="article:modified_time" content="2015-04-29T23:28:45.716Z">
    <meta property="article:tag" content="python">
    <meta property="article:tag" content="tutorial">
    <meta property="article:tag" content="logging">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Logging in Python">
    <meta name="twitter:description" content="Logging in Python is very necessary as a debugging tool. It allows us to see why our program breaks and to fix it quickly....">
    <meta name="twitter:url" content="http://briank.im/logging-like-a-professional-lumberjack/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "loving learning",
    "author": {
        "@type": "Person",
        "name": "bk",
        "image": "http://briank.im/content/images/2015/04/profile.jpg",
        "url": "http://briank.im/author/bk",
        "sameAs": ""
    },
    "headline": "Logging in Python",
    "url": "http://briank.im/logging-like-a-professional-lumberjack/",
    "datePublished": "2015-04-29T00:45:00.000Z",
    "dateModified": "2015-04-29T23:28:45.716Z",
    "keywords": "python, tutorial, logging",
    "description": "Logging in Python is very necessary as a debugging tool. It allows us to see why our program breaks and to fix it quickly...."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="loving learning" href="http://briank.im/rss/">
</head>
<body class="post-template tag-python tag-tutorial tag-logging">

	<header id="site-head">
		<div class="vertical">
			<div id="site-head-content" class="inner">

				<a id="blog-logo" href="http://briank.im"><img src="../content/images/2015/04/bk_logo-150.png" alt="Blog Logo"></a>
				<h1 class="blog-title">loving learning</h1>
				<h2 class="blog-description">a journey to learn as much as i can</h2>
				    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/">Home</a></h3>
    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/about/">About</a></h3>
    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/tag/tutorial/">Learn</a></h3>
    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/contact/">Contact</a></h3>

			</div>
		</div>
	</header>

    

<main class="content" role="main">

    <article class="post tag-python tag-tutorial tag-logging">




        <span class="post-meta"><time datetime="2015-04-28">28 Apr 2015</time> on <a href="../tag/python/">python</a> | <a href="../tag/tutorial/">tutorial</a> | <a href="../tag/logging/">logging</a></span>

        <h1 class="post-title">Logging Like a Professional Lumberjack</h1>

        <section class="post-content" id="jetzt-container">
            <h4 id="basicloggingtutorialforpython">Basic Logging Tutorial for Python</h4>

<p><img src="../content/images/2015/04/logging.jpg" alt="Logging">
A while back, I wrote an <a href="http://briank.im/scraped-knees/">entry</a> where part of it describes a how to on logging in Python. If that was a super basic tutorial on logging, this one kicks it up a notch as a regular basic tutorial!</p>

<h4 id="whatisit">What is it?</h4>

<p>I guess the first question we need to answer is, what exactly is logging. If my 5 year old niece asked me to describe it, I would say <b>"It's basically writing what happens to a file"</b>. Just like you might record a workout log to keep track of how you're doing, including when you fail, you can do the same with an application or program. So this is often used to record when there's an error or pretty much when something breaks. <br>
<img src="../content/images/2015/04/workout_log.jpg" alt="workout log"></p>

<h4 id="whynotjustprint">Why not just 'print'</h4>

<p>Well I could just print it to the console can't I? Well you can, but what if you're running a scraping program with thousands or more queries. It's much more convenient to have it available to you, always, in a file. Though you could technically log to the console as well. As a program or file gets more complex, logging is a necessary tool for debugging. <br>
<img src="../content/images/2015/04/no-printer.png" alt="no printer"></p>

<h4 id="okayenoughwiththelamepicsjusttellmehowtologalready">Okay, enough with the lame pics, just tell me how to LOG already!</h4>

<p>Okay, okay, sheesh! Logging is really easy in Python beause it's built right into it. The standard Python logging module is built in and accessible by an easy import:  </p>

<pre><code class="language-python">import logging  
logging.basicConfig(filename='debug.log',level=logging.DEBUG)  
</code></pre>

<p>This is the most basic way to write logs to a file. The filename attribute is where the log will get saved, DUH, and the level is which level of errors you would like to be logged. The order of logging levels from lowest to highest is: DEBUG, INFO, WARNING, ERROR, CRITICAL. So if I set the level at WARNING, I would get all WARNING, ERROR, and CRITICAL level logs while DEBUG and INFO would be ignored. For now, since we want them all, let's sit it to DEBUG.</p>

<p>There you go, now your system is setup to begin logging! So how do you actually make your program log? Also not that hard!  </p>

<pre><code class="language-python">logger.debug("Starting the scrape")  
logger.info("Finished scraping critic")  
logger.warning("Critic url does not exist")  
logger.critical("Save yourself while you still have time")  
</code></pre>

<p>Try to  run this and see if it's creating/writing into debug.log. If it is, maybe we can move onto a slightly more advanced logging idea: Rotating File Handlers.</p>

<h4 id="thispicturehasnothingtodowithfilehandlers">This Picture Has Nothing to do with File Handlers</h4>

<p><img src="../content/images/2015/04/lumberjack.jpg" alt="Lumberjacks"></p>

<p>While the above example works perfectly for small functions or modules, when things get more complex, we will need something a little bit more heavy duty. One of the ways we do that is by using RotatingFileHandler, which is a logging handler. We will also be formatting the log files. Now how do we do this?  </p>

<pre><code class="language-python">import logging  
import logging.handlers

# Pick minimum level of reporting logging
LEVEL = logging.DEBUG

# Format to include when, who, where, what
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')

# Name is module name
logger = logging.getLogger(__name__)  
logger.setLevel(LEVEL)

# Create file size limit and file name
handler = logging.handlers.RotatingFileHandler('debug.log', maxBytes=2000000, backupCount=20)  
handler.setLevel(LEVEL)  
handler.setFormatter(formatter)

# Add handler to logger
logger.addHandler(handler)  
</code></pre>

<p>Let's go over this code line by line.  </p>

<pre><code class="language-python">LEVEL = logging.DEBUG  
</code></pre>

<p>Here we are picking a level for logging just like above.  </p>

<pre><code class="language-python">formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')  
</code></pre>

<p>In this part, we are picking a formatting for our log so that when we look at it later on it'll make more sense.</p>

<h4 id="rotatingloghandler">Rotating Log Handler</h4>

<p><img src="../content/images/2015/04/lotoflogs.jpg" alt="lot of logs"></p>

<pre><code class="language-python">handler = logging.handlers.RotatingFileHandler('debug.log', maxBytes=2000000, backupCount=20)  
</code></pre>

<p>Now this is where it gets trickier. The RotatingFileHandler lets you define what you want the maxsize of a file to be and how many files you want to keep backed up. RotatingFileHandler writes the logs to iterations of the log file with the newest logs going in the smaller numbered files. So it will basically fill up debug.log first. Once that's filled up, debug.log will be renamed to debug.log.1. Then debug.log will be wiped and then filled with new data. This will happen till it gets to the backupCount, at which point it'll stop keeping tracking of the older logs.  </p>

<pre><code class="language-python">handler.setLevel(LEVEL)  
handler.setFormatter(formatter)  
logger.addHandler(handler)  
</code></pre>

<p>And finally let's put it all together by adding the formating and handling we just defined above. Now our code can log like an expert!</p>

<p><img src="../content/images/2015/04/keep-calm-and-stop-logging.jpg" alt="keep logging"></p>

<h4 id="keepingtrackofwhereweare">Keeping Track of Where We Are</h4>

<p>One use of logging is to use it to keep track of where we are so that we can estimate more accurately how much time is remaining.  </p>

<pre><code class="language-python">for review in soup.find_all('div', class_='review_wrap'):  
    logger.debug("Starting the scrape for " + review)
</code></pre>

<h4 id="tryandexcept">Try and Except</h4>

<p>One of the best places to use logging is in the except part of a try/except block.  </p>

<pre><code class="language-python">try:  
    pubs_list = [pub.a.text.strip() for pub in critic_element.find_all(class_="source")]
except Exception:  
    logging.exception("Publications cannot be found for critic")
</code></pre>

<h4 id="manymoreusecases">Many More Use Cases</h4>

<p>There are a lot more use cases for logging! <a href="https://docs.python.org/2/library/logging.html">Here</a> is a link to Python's documentation for Logging. Happy logging! <br>
<img src="../content/images/2015/04/lone_logger.JPG" alt="logger"></p>

<p><br>  </p>

<h5 id="whatilearnedtoday">What I Learned Today:</h5>

<pre><code>There is a Lumberjack World Championships.  
</code></pre>

<p><img src="../content/images/2015/04/lumberjack-1.jpg" alt="lumberjack world championships"></p>
        </section>

        <footer class="post-footer">

                <section class="author">
                    <h4>bk</h4>
                    <p>There are three things I love in this life: learning, efficiency and my wife, not necessarily in that order</p>
                </section>

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Logging%20Like%20a%20Professional%20Lumberjack&amp;url=http://briank.im/logging-like-a-professional-lumberjack/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://briank.im/logging-like-a-professional-lumberjack/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://briank.im/logging-like-a-professional-lumberjack/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
			<!--<div id="disqus_thread"></div>-->
    <script type="text/javascript">
//        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
//        var disqus_shortname = '[your forum shortname]'; // required: replace example with your forum shortname
//
//        /* * * DON'T EDIT BELOW THIS LINE * * */
//        (function() {
//            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
//            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
//            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
//        })();
    </script>
    <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
    <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
        </footer>


    </article>

</main>



    <script src="../public/jquery.js?v=cad3784cd1"></script>

    <script type="text/javascript" src="../assets/js/index.js?v=cad3784cd1"></script>
    <script type="text/javascript" src="../assets/js/prism.js?v=cad3784cd1"></script>
</body>
