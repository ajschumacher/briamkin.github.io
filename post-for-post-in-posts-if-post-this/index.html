
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>List Comprehensions</title>
    <meta name="description" content="List comprehensions are super useful and simple in Python, not too mention beautiful!">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="57x57" href="../assets/favicon/apple-touch-icon-57x57.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="60x60" href="../assets/favicon/apple-touch-icon-60x60.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="72x72" href="../assets/favicon/apple-touch-icon-72x72.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="76x76" href="../assets/favicon/apple-touch-icon-76x76.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="114x114" href="../assets/favicon/apple-touch-icon-114x114.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="120x120" href="../assets/favicon/apple-touch-icon-120x120.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="144x144" href="../assets/favicon/apple-touch-icon-144x144.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="152x152" href="../assets/favicon/apple-touch-icon-152x152.png?v=d9145c7f8e">
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicon/apple-touch-icon-180x180.png?v=d9145c7f8e">
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-32x32.png?v=d9145c7f8e">
    <link rel="icon" type="image/png" href="../assets/favicon/android-chrome-192x192.png?v=d9145c7f8e">
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-96x96.png?v=d9145c7f8e">
    <link rel="icon" type="image/png" href="../assets/favicon/favicon-16x16.png?v=d9145c7f8e">
    <link rel="manifest" href="../assets/favicon/manifest.json?v=d9145c7f8e">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/assets/favicon/mstile-144x144.png?v=d9145c7f8e">
    <meta name="theme-color" content="#ffffff">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=d9145c7f8e">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic%7COpen+Sans:700,400">
    <link rel="stylesheet" type="text/css" href="../assets/css/prism.css?v=d9145c7f8e">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-62074703-1', 'auto');
      ga('send', 'pageview');

    </script>
    <link rel="canonical" href="http://briank.im/post-for-post-in-posts-if-post-this/">
    
    <meta property="og:site_name" content="loving learning">
    <meta property="og:type" content="article">
    <meta property="og:title" content="List Comprehensions">
    <meta property="og:description" content="List comprehensions are super useful and simple in Python, not too mention beautiful!...">
    <meta property="og:url" content="http://briank.im/post-for-post-in-posts-if-post-this/">
    <meta property="og:image" content="http://briank.im/content/images/2015/04/py_square.jpg">
    <meta property="article:published_time" content="2015-04-28T00:21:00.000Z">
    <meta property="article:modified_time" content="2015-04-30T18:01:54.682Z">
    <meta property="article:tag" content="metis">
    <meta property="article:tag" content="python">
    <meta property="article:tag" content="tutorial">
    <meta property="article:tag" content="list comprehension">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="List Comprehensions">
    <meta name="twitter:description" content="List comprehensions are super useful and simple in Python, not too mention beautiful!...">
    <meta name="twitter:url" content="http://briank.im/post-for-post-in-posts-if-post-this/">
    <meta name="twitter:image:src" content="http://briank.im/content/images/2015/04/py_square.jpg">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "loving learning",
    "author": {
        "@type": "Person",
        "name": "bk",
        "image": "http://briank.im/content/images/2015/04/profile.jpg",
        "url": "http://briank.im/author/bk",
        "sameAs": ""
    },
    "headline": "List Comprehensions",
    "url": "http://briank.im/post-for-post-in-posts-if-post-this/",
    "datePublished": "2015-04-28T00:21:00.000Z",
    "dateModified": "2015-04-30T18:01:54.682Z",
    "image": "http://briank.im/content/images/2015/04/py_square.jpg",
    "keywords": "metis, python, tutorial, list comprehension",
    "description": "List comprehensions are super useful and simple in Python, not too mention beautiful!..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="loving learning" href="http://briank.im/rss/">
</head>
<body class="post-template tag-metis tag-python tag-tutorial tag-list-comprehension">

	<header id="site-head" style="background-image: url(../content/images/2015/04/py_square.jpg)">
		<div class="vertical">
			<div id="site-head-content" class="inner">

				<a id="blog-logo" href="http://briank.im"><img src="../content/images/2015/04/bk_logo-150.png" alt="Blog Logo"></a>
				<h1 class="blog-title">loving learning</h1>
				<h2 class="blog-description">a journey to learn as much as i can</h2>
				    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/tag/project-write-ups/">Projects</a></h3>
    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/tag/tutorial/">Learn</a></h3>
    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/about/">About</a></h3>
    <h3 class="blog-nav-item"><a class="header-link" href="http://briank.im/contact/">Contact</a></h3>

			</div>
		</div>
	</header>

    

<main class="content" role="main">

    <article class="post tag-metis tag-python tag-tutorial tag-list-comprehension">




        <span class="post-meta"><time datetime="2015-04-27">27 Apr 2015</time> on <a href="../tag/metis/">metis</a> | <a href="../tag/python/">python</a> | <a href="../tag/tutorial/">tutorial</a> | <a href="../tag/list-comprehension/">list comprehension</a></span>

        <h1 class="post-title">[post for post in posts if post == this]</h1>

        <section class="post-content" id="jetzt-container">
            <h4 id="comprehendinglistcomprehensions">Comprehending List Comprehensions</h4>

<p><img src="../content/images/2015/04/python_logo-1.png" alt="python">
List comprehensions are pretty cool. They make a lot of sense and are really well designed in Python. While working on some challenges today at Metis, I was able to shorten a lot of my code while using this technique. List comprehensions with Python are only now becoming more natural for me to use because they weren't part of my normal programmatic thinking with PHP or Javascript (though you could kind of force it with Javascript and some mapping).</p>

<p>But it is completely natural in the Python language and the syntax is rather beautiful (and logical).</p>

<p>In my code, I was taking data from a file and and turning it into a Pandas DataFrame to clean up. My initial code looked something like this before I took a minute to clean it up.  </p>

<pre><code class="language-python">def clean_vote_data(file):  
    data = []
    for line in open(file):
        data.append(line.rstrip('\n').split(','))
    data = pd.DataFrame(data)
    cleaned_data = data.replace(['y', 'n', '?'], [1, 0, np.nan])
    cleaned_data = cleaned_data.fillna(cleaned_data.mean())
    return cleaned_data
cleaned_vote_data = clean_vote_data("house-votes-84.data")  
</code></pre>

<p>But using a list comprehension, I turned the first 3 lines of the function into 1 "pythonic" line:  </p>

<pre><code class="language-python">def clean_vote_data(file):  
    data = pd.DataFrame([line.rstrip('\n').split(',') for line in open(file)])
    cleaned_data = data.replace(['y', 'n', '?'], [1, 0, np.nan])
    cleaned_data = cleaned_data.fillna(cleaned_data.mean())
    return cleaned_data
cleaned_vote_data = clean_vote_data("house-votes-84.data")  
</code></pre>

<h4 id="explanation">Explanation</h4>

<p>Now, let me explain this a bit.  </p>

<pre><code class="language-python">[2*x for x in [2,4,6,8]]
</code></pre>

<p>This would return a new array of [4,8,12,16]. The code is saying for each value in the array, let's call each one x, then multiply it by 2. So the part before the "for" is the action you are doing to each array element.</p>

<p>You can also add an if statement to it like so:  </p>

<pre><code class="language-python">[2*x for x in [2,4,6,8] if x &lt; 5]
</code></pre>

<p>This would predictably return [4,8] because it will only apply the multiplication to 2 and 4.</p>

<p>So in my code at the top, the list comprehension is this:  </p>

<pre><code class="language-python">[line.rstrip('\n').split(',') for line in open(file)]
</code></pre>

<p>Basically for each line in the file, we are returning an array of each element, divided by commas. Then we create a Pandas DataFrame with this!</p>

<p>Super simple and concise.</p>

<p>We can also make this pretty crazy by nesting more list comprehensions in it... because, what if the array that we were looping through was a list comprehension itself!</p>

<p>Let's look at this line again:  </p>

<pre><code class="language-python">[2*x for x in [2,4,6,8] if x &lt; 5]
</code></pre>

<p>Now, what if [2,4,6,8] was actually a list comprehension like this:  </p>

<pre><code class="language-python">[2*x for y in [1,2,3,4]]
</code></pre>

<p>Then if we replaced it, it would like this:  </p>

<pre><code class="language-python">[2*x for x in [2*x for y in [1,2,3,4]] if x &lt; 5]
</code></pre>

<p>And it would still do the exact same thing and you could theoretically just keep on nesting... and nesting... and nesting! <br>
<img src="../content/images/2015/04/nest-1.jpg" alt="nest"></p>

<p>Till next time, nest on.</p>

<p>I &lt;3 Python</p>

<p><br>  </p>

<h5 id="whatilearnedtoday">What I Learned Today:</h5>

<pre><code>Importing antigravity into python links to http://xkcd.com/353/  
</code></pre>
        </section>

        <footer class="post-footer">

                <section class="author">
                    <h4>bk</h4>
                    <p>There are three things I love in this life: learning, efficiency and my wife, not necessarily in that order</p>
                </section>

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=%5Bpost%20for%20post%20in%20posts%20if%20post%20==%20this%5D&amp;url=http://briank.im/post-for-post-in-posts-if-post-this/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://briank.im/post-for-post-in-posts-if-post-this/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://briank.im/post-for-post-in-posts-if-post-this/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
			<!--<div id="disqus_thread"></div>-->
    <script type="text/javascript">
//        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
//        var disqus_shortname = '[your forum shortname]'; // required: replace example with your forum shortname
//
//        /* * * DON'T EDIT BELOW THIS LINE * * */
//        (function() {
//            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
//            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
//            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
//        })();
    </script>
    <!--<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>-->
    <!--<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>-->
        </footer>


    </article>

</main>



    <script src="../public/jquery.js?v=d9145c7f8e"></script>

    <script type="text/javascript" src="../assets/js/index.js?v=d9145c7f8e"></script>
    <script type="text/javascript" src="../assets/js/prism.js?v=d9145c7f8e"></script>
</body>
